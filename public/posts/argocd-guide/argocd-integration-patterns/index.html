<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ArgoCD Integration Patterns | Just a Guy, from Kenya</title>
<meta name="keywords" content="kubernetes, argocd, gitops, devops, integration">
<meta name="description" content="Comprehensive guide for integrating ArgoCD with CI/CD pipelines, external tools, and enterprise systems">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/argocd-guide/argocd-integration-patterns/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/argocd-guide/argocd-integration-patterns/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="http://localhost:1313/posts/argocd-guide/argocd-integration-patterns/">
  <meta property="og:site_name" content="Just a Guy, from Kenya">
  <meta property="og:title" content="ArgoCD Integration Patterns">
  <meta property="og:description" content="Comprehensive guide for integrating ArgoCD with CI/CD pipelines, external tools, and enterprise systems">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-04-27T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-04-27T00:00:00+00:00">
    <meta property="article:tag" content="Kubernetes">
    <meta property="article:tag" content="Argocd">
    <meta property="article:tag" content="Gitops">
    <meta property="article:tag" content="Devops">
    <meta property="article:tag" content="Integration">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ArgoCD Integration Patterns">
<meta name="twitter:description" content="Comprehensive guide for integrating ArgoCD with CI/CD pipelines, external tools, and enterprise systems">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Complete ArgoCD Implementation Guide",
      "item": "http://localhost:1313/posts/argocd-guide/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "ArgoCD Integration Patterns",
      "item": "http://localhost:1313/posts/argocd-guide/argocd-integration-patterns/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ArgoCD Integration Patterns",
  "name": "ArgoCD Integration Patterns",
  "description": "Comprehensive guide for integrating ArgoCD with CI/CD pipelines, external tools, and enterprise systems",
  "keywords": [
    "kubernetes", "argocd", "gitops", "devops", "integration"
  ],
  "articleBody": "ArgoCD Integration Patterns CI/CD Pipeline Integration GitHub Actions Integration name: Deploy to ArgoCD on: push: branches: [ main ] jobs: deploy: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 - name: Install ArgoCD CLI run: | curl -sSL -o argocd https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64 sudo install -m 555 argocd /usr/local/bin/argocd - name: Deploy to ArgoCD run: | argocd app sync my-application --auth-token ${{ secrets.ARGOCD_TOKEN }} Jenkins Pipeline pipeline { agent any environment { ARGOCD_SERVER = 'argocd.example.com' ARGOCD_TOKEN = credentials('argocd-token') } stages { stage('Deploy') { steps { sh ''' argocd login $ARGOCD_SERVER --auth-token $ARGOCD_TOKEN --insecure argocd app sync my-application ''' } } } } GitLab CI Integration deploy: stage: deploy script: - argocd login $ARGOCD_SERVER --auth-token $ARGOCD_TOKEN - argocd app sync my-application only: - main External Tools Connectivity Prometheus Integration apiVersion: monitoring.coreos.com/v1 kind: ServiceMonitor metadata: name: argocd-metrics namespace: monitoring spec: selector: matchLabels: app.kubernetes.io/name: argocd-metrics endpoints: - port: metrics interval: 30s Grafana Dashboard apiVersion: integreatly.org/v1alpha1 kind: GrafanaDashboard metadata: name: argocd-dashboard spec: json: | { \"dashboard\": { \"title\": \"ArgoCD Metrics\", \"panels\": [ { \"title\": \"Sync Status\", \"type\": \"graph\" } ] } } Slack Notifications apiVersion: v1 kind: ConfigMap metadata: name: argocd-notifications-cm data: service.slack: | token: $slack-token username: ArgoCD trigger.on-sync-status-changed: | - send: [slack] Authentication Systems OIDC Configuration apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm namespace: argocd data: url: https://argocd.example.com dex.config: | connectors: - type: oidc id: google name: Google config: issuer: https://accounts.google.com clientID: your-client-id clientSecret: $oidc-secret LDAP Integration apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm data: url: https://argocd.example.com dex.config: | connectors: - type: ldap name: ActiveDirectory id: ad config: host: ldap.example.com:389 bindDN: cn=admin,dc=example,dc=com bindPW: $ldap-password Git Provider Integration GitHub Integration apiVersion: v1 kind: Secret metadata: name: repo-secret namespace: argocd stringData: type: git url: https://github.com/organization/repo password: github-token username: git GitLab Integration apiVersion: v1 kind: Secret metadata: name: gitlab-secret namespace: argocd stringData: type: git url: https://gitlab.com/organization/repo password: gitlab-token username: git Custom Tool Integration Webhook Configuration apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm data: webhooks: | - type: GitHub endpoint: /api/webhook url: https://github.com/your-org/repo secret: $webhook-secret Custom Health Checks apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm data: resource.customizations: | custom.group/Kind: health.lua: | hs = {} if obj.status.health == \"healthy\" then hs.status = \"Healthy\" else hs.status = \"Progressing\" end return hs Monitoring Solutions Datadog Integration apiVersion: v1 kind: Secret metadata: name: datadog-secret namespace: argocd stringData: api-key: your-datadog-api-key --- apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm data: datadog.enabled: \"true\" datadog.address: \"https://api.datadoghq.com\" New Relic Integration apiVersion: monitoring.newrelic.com/v1alpha1 kind: NRQLAlert metadata: name: argocd-sync-alert spec: query: \"SELECT count(*) FROM ArgoCD WHERE status = 'Failed'\" threshold: 1 Security Integration Vault Integration apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm data: vault.enabled: \"true\" vault.addr: \"https://vault.example.com\" vault.role: \"argocd\" Certificate Management apiVersion: cert-manager.io/v1 kind: Certificate metadata: name: argocd-cert spec: secretName: argocd-secret issuerRef: name: letsencrypt-prod kind: ClusterIssuer dnsNames: - argocd.example.com Troubleshooting Integrations Common Integration Issues Authentication failures Webhook misconfiguration Permission problems Network connectivity Debug Procedures # Check integration status argocd admin settings validate # Test webhook curl -X POST https://argocd/api/webhook -d @webhook-payload.json # Verify connections argocd admin app validate Best Practices Security Considerations Use service accounts Implement least privilege Regular secret rotation Audit logging Performance Optimization Rate limiting Cache configuration Connection pooling Resource allocation Homelab Integration Examples Local Git Server Integration (Gitea) apiVersion: v1 kind: Secret metadata: name: gitea-repo-secret namespace: argocd stringData: type: git url: http://gitea.local/your-org/repo username: git password: your-token Local Registry Integration apiVersion: v1 kind: Secret metadata: name: local-registry-secret namespace: argocd type: kubernetes.io/dockerconfigjson stringData: .dockerconfigjson: | { \"auths\": { \"registry.local:5000\": { \"auth\": \"base64-encoded-auth\" } } } Tailscale VPN Integration apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm namespace: argocd data: timeout.reconciliation: 180s kustomize.buildOptions: --network HomeLab Monitoring Integration Prometheus Stack apiVersion: argoproj.io/v1alpha1 kind: Application metadata: name: prometheus-stack namespace: argocd spec: project: default source: repoURL: https://github.com/prometheus-community/helm-charts.git targetRevision: HEAD path: charts/kube-prometheus-stack helm: values: | grafana: adminPassword: your-admin-password prometheus: prometheusSpec: retention: 15d storageSpec: volumeClaimTemplate: spec: storageClassName: local-path resources: requests: storage: 50Gi Grafana Dashboard Configuration apiVersion: v1 kind: ConfigMap metadata: name: argocd-grafana-dashboard namespace: monitoring labels: grafana_dashboard: \"true\" data: argocd-dashboard.json: | { \"title\": \"ArgoCD Overview\", \"panels\": [ { \"title\": \"Sync Status\", \"type\": \"gauge\", \"datasource\": \"Prometheus\" } ] } Local Authentication Integration LDAP with FreeIPA apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm namespace: argocd data: url: https://argocd.local dex.config: | connectors: - type: ldap name: FreeIPA id: freeipa config: host: freeipa.local:389 insecureNoSSL: false bindDN: uid=service-account,cn=users,cn=accounts,dc=local bindPW: $LDAP_PASSWORD userSearch: baseDN: cn=users,cn=accounts,dc=local filter: (objectClass=person) username: uid idAttr: uid emailAttr: mail nameAttr: displayName groupSearch: baseDN: cn=groups,cn=accounts,dc=local filter: (objectClass=groupOfNames) userAttr: DN groupAttr: member nameAttr: cn Advanced Integration Examples HashiCorp Vault Integration apiVersion: v1 kind: Secret metadata: name: argocd-vault-plugin-credentials namespace: argocd stringData: VAULT_ADDR: \"http://vault.local:8200\" VAULT_TOKEN: \"your-vault-token\" --- apiVersion: v1 kind: ConfigMap metadata: name: argocd-cm namespace: argocd data: configManagementPlugins: | - name: argocd-vault-plugin generate: command: [\"argocd-vault-plugin\"] args: [\"generate\", \"./\"] Custom Metrics Integration apiVersion: monitoring.coreos.com/v1 kind: ServiceMonitor metadata: name: argocd-metrics namespace: monitoring spec: selector: matchLabels: app.kubernetes.io/name: argocd-metrics endpoints: - port: metrics interval: 30s path: /metrics metricRelabelings: - sourceLabels: [__name__] regex: 'argocd_.*' action: keep Backup Integration with Minio apiVersion: v1 kind: Secret metadata: name: minio-backup-credentials namespace: argocd stringData: AWS_ACCESS_KEY_ID: your-access-key AWS_SECRET_ACCESS_KEY: your-secret-key --- apiVersion: batch/v1 kind: CronJob metadata: name: argocd-backup namespace: argocd spec: schedule: \"0 1 * * *\" jobTemplate: spec: template: spec: containers: - name: backup image: bitnami/kubectl command: - /bin/sh - -c - | argocd admin export \u003e /backup/argocd-$(date +%Y%m%d).yaml mc cp /backup/* minio/argocd-backup/ Next Steps Return to the main guide or review Real-World Scenarios.\n",
  "wordCount" : "868",
  "inLanguage": "en",
  "datePublished": "2025-04-27T00:00:00Z",
  "dateModified": "2025-04-27T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/argocd-guide/argocd-integration-patterns/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Just a Guy, from Kenya",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Just a Guy, from Kenya (Alt + H)">Just a Guy, from Kenya</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/about/" title="About">
                    <span>About Me</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/cv/" title="CV">
                    <span>CV</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/argocd-guide/">Complete ArgoCD Implementation Guide</a></div>
    <h1 class="post-title entry-hint-parent">
      ArgoCD Integration Patterns
    </h1>
    <div class="post-description">
      Comprehensive guide for integrating ArgoCD with CI/CD pipelines, external tools, and enterprise systems
    </div>
    <div class="post-meta"><span title='2025-04-27 00:00:00 +0000 UTC'>April 27, 2025</span>&nbsp;·&nbsp;5 min

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#argocd-integration-patterns" aria-label="ArgoCD Integration Patterns">ArgoCD Integration Patterns</a><ul>
                        
                <li>
                    <a href="#cicd-pipeline-integration" aria-label="CI/CD Pipeline Integration">CI/CD Pipeline Integration</a><ul>
                        
                <li>
                    <a href="#github-actions-integration" aria-label="GitHub Actions Integration">GitHub Actions Integration</a></li>
                <li>
                    <a href="#jenkins-pipeline" aria-label="Jenkins Pipeline">Jenkins Pipeline</a></li>
                <li>
                    <a href="#gitlab-ci-integration" aria-label="GitLab CI Integration">GitLab CI Integration</a></li></ul>
                </li>
                <li>
                    <a href="#external-tools-connectivity" aria-label="External Tools Connectivity">External Tools Connectivity</a><ul>
                        
                <li>
                    <a href="#prometheus-integration" aria-label="Prometheus Integration">Prometheus Integration</a></li>
                <li>
                    <a href="#grafana-dashboard" aria-label="Grafana Dashboard">Grafana Dashboard</a></li>
                <li>
                    <a href="#slack-notifications" aria-label="Slack Notifications">Slack Notifications</a></li></ul>
                </li>
                <li>
                    <a href="#authentication-systems" aria-label="Authentication Systems">Authentication Systems</a><ul>
                        
                <li>
                    <a href="#oidc-configuration" aria-label="OIDC Configuration">OIDC Configuration</a></li>
                <li>
                    <a href="#ldap-integration" aria-label="LDAP Integration">LDAP Integration</a></li></ul>
                </li>
                <li>
                    <a href="#git-provider-integration" aria-label="Git Provider Integration">Git Provider Integration</a><ul>
                        
                <li>
                    <a href="#github-integration" aria-label="GitHub Integration">GitHub Integration</a></li>
                <li>
                    <a href="#gitlab-integration" aria-label="GitLab Integration">GitLab Integration</a></li></ul>
                </li>
                <li>
                    <a href="#custom-tool-integration" aria-label="Custom Tool Integration">Custom Tool Integration</a><ul>
                        
                <li>
                    <a href="#webhook-configuration" aria-label="Webhook Configuration">Webhook Configuration</a></li>
                <li>
                    <a href="#custom-health-checks" aria-label="Custom Health Checks">Custom Health Checks</a></li></ul>
                </li>
                <li>
                    <a href="#monitoring-solutions" aria-label="Monitoring Solutions">Monitoring Solutions</a><ul>
                        
                <li>
                    <a href="#datadog-integration" aria-label="Datadog Integration">Datadog Integration</a></li>
                <li>
                    <a href="#new-relic-integration" aria-label="New Relic Integration">New Relic Integration</a></li></ul>
                </li>
                <li>
                    <a href="#security-integration" aria-label="Security Integration">Security Integration</a><ul>
                        
                <li>
                    <a href="#vault-integration" aria-label="Vault Integration">Vault Integration</a></li>
                <li>
                    <a href="#certificate-management" aria-label="Certificate Management">Certificate Management</a></li></ul>
                </li>
                <li>
                    <a href="#troubleshooting-integrations" aria-label="Troubleshooting Integrations">Troubleshooting Integrations</a><ul>
                        
                <li>
                    <a href="#common-integration-issues" aria-label="Common Integration Issues">Common Integration Issues</a></li>
                <li>
                    <a href="#debug-procedures" aria-label="Debug Procedures">Debug Procedures</a></li></ul>
                </li>
                <li>
                    <a href="#best-practices" aria-label="Best Practices">Best Practices</a><ul>
                        
                <li>
                    <a href="#security-considerations" aria-label="Security Considerations">Security Considerations</a></li>
                <li>
                    <a href="#performance-optimization" aria-label="Performance Optimization">Performance Optimization</a></li></ul>
                </li>
                <li>
                    <a href="#homelab-integration-examples" aria-label="Homelab Integration Examples">Homelab Integration Examples</a><ul>
                        
                <li>
                    <a href="#local-git-server-integration-gitea" aria-label="Local Git Server Integration (Gitea)">Local Git Server Integration (Gitea)</a></li>
                <li>
                    <a href="#local-registry-integration" aria-label="Local Registry Integration">Local Registry Integration</a></li>
                <li>
                    <a href="#tailscale-vpn-integration" aria-label="Tailscale VPN Integration">Tailscale VPN Integration</a></li></ul>
                </li>
                <li>
                    <a href="#homelab-monitoring-integration" aria-label="HomeLab Monitoring Integration">HomeLab Monitoring Integration</a><ul>
                        
                <li>
                    <a href="#prometheus-stack" aria-label="Prometheus Stack">Prometheus Stack</a></li>
                <li>
                    <a href="#grafana-dashboard-configuration" aria-label="Grafana Dashboard Configuration">Grafana Dashboard Configuration</a></li></ul>
                </li>
                <li>
                    <a href="#local-authentication-integration" aria-label="Local Authentication Integration">Local Authentication Integration</a><ul>
                        
                <li>
                    <a href="#ldap-with-freeipa" aria-label="LDAP with FreeIPA">LDAP with FreeIPA</a></li></ul>
                </li>
                <li>
                    <a href="#advanced-integration-examples" aria-label="Advanced Integration Examples">Advanced Integration Examples</a><ul>
                        
                <li>
                    <a href="#hashicorp-vault-integration" aria-label="HashiCorp Vault Integration">HashiCorp Vault Integration</a></li>
                <li>
                    <a href="#custom-metrics-integration" aria-label="Custom Metrics Integration">Custom Metrics Integration</a></li>
                <li>
                    <a href="#backup-integration-with-minio" aria-label="Backup Integration with Minio">Backup Integration with Minio</a></li></ul>
                </li>
                <li>
                    <a href="#next-steps" aria-label="Next Steps">Next Steps</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="argocd-integration-patterns">ArgoCD Integration Patterns<a hidden class="anchor" aria-hidden="true" href="#argocd-integration-patterns">#</a></h1>
<h2 id="cicd-pipeline-integration">CI/CD Pipeline Integration<a hidden class="anchor" aria-hidden="true" href="#cicd-pipeline-integration">#</a></h2>
<h3 id="github-actions-integration">GitHub Actions Integration<a hidden class="anchor" aria-hidden="true" href="#github-actions-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy to ArgoCD</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">push</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">branches</span>: [ <span style="color:#ae81ff">main ]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v2</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Install ArgoCD CLI</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        curl -sSL -o argocd https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        sudo install -m 555 argocd /usr/local/bin/argocd</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy to ArgoCD</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        argocd app sync my-application --auth-token ${{ secrets.ARGOCD_TOKEN }}</span>
</span></span></code></pre></div><h3 id="jenkins-pipeline">Jenkins Pipeline<a hidden class="anchor" aria-hidden="true" href="#jenkins-pipeline">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>pipeline <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    agent any
</span></span><span style="display:flex;"><span>    environment <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        ARGOCD_SERVER <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;argocd.example.com&#39;</span>
</span></span><span style="display:flex;"><span>        ARGOCD_TOKEN <span style="color:#f92672">=</span> credentials<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;argocd-token&#39;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    stages <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        stage<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;Deploy&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            steps <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                sh <span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    argocd login $ARGOCD_SERVER --auth-token $ARGOCD_TOKEN --insecure
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    argocd app sync my-application
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                &#39;&#39;&#39;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="gitlab-ci-integration">GitLab CI Integration<a hidden class="anchor" aria-hidden="true" href="#gitlab-ci-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">stage</span>: <span style="color:#ae81ff">deploy</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">script</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">argocd login $ARGOCD_SERVER --auth-token $ARGOCD_TOKEN</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">argocd app sync my-application</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">only</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">main</span>
</span></span></code></pre></div><h2 id="external-tools-connectivity">External Tools Connectivity<a hidden class="anchor" aria-hidden="true" href="#external-tools-connectivity">#</a></h2>
<h3 id="prometheus-integration">Prometheus Integration<a hidden class="anchor" aria-hidden="true" href="#prometheus-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">monitoring.coreos.com/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ServiceMonitor</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-metrics</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">monitoring</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">argocd-metrics</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">endpoints</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">metrics</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">30s</span>
</span></span></code></pre></div><h3 id="grafana-dashboard">Grafana Dashboard<a hidden class="anchor" aria-hidden="true" href="#grafana-dashboard">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">integreatly.org/v1alpha1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">GrafanaDashboard</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-dashboard</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">json</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      &#34;dashboard&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;title&#34;: &#34;ArgoCD Metrics&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;panels&#34;: [
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;title&#34;: &#34;Sync Status&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            &#34;type&#34;: &#34;graph&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }</span>
</span></span></code></pre></div><h3 id="slack-notifications">Slack Notifications<a hidden class="anchor" aria-hidden="true" href="#slack-notifications">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-notifications-cm</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">service.slack</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    token: $slack-token
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    username: ArgoCD</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">trigger.on-sync-status-changed</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - send: [slack]</span>
</span></span></code></pre></div><h2 id="authentication-systems">Authentication Systems<a hidden class="anchor" aria-hidden="true" href="#authentication-systems">#</a></h2>
<h3 id="oidc-configuration">OIDC Configuration<a hidden class="anchor" aria-hidden="true" href="#oidc-configuration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#ae81ff">https://argocd.example.com</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dex.config</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    connectors:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - type: oidc
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        id: google
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        name: Google
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          issuer: https://accounts.google.com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          clientID: your-client-id
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          clientSecret: $oidc-secret</span>
</span></span></code></pre></div><h3 id="ldap-integration">LDAP Integration<a hidden class="anchor" aria-hidden="true" href="#ldap-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#ae81ff">https://argocd.example.com</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dex.config</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    connectors:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - type: ldap
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        name: ActiveDirectory
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        id: ad
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          host: ldap.example.com:389
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          bindDN: cn=admin,dc=example,dc=com
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          bindPW: $ldap-password</span>
</span></span></code></pre></div><h2 id="git-provider-integration">Git Provider Integration<a hidden class="anchor" aria-hidden="true" href="#git-provider-integration">#</a></h2>
<h3 id="github-integration">GitHub Integration<a hidden class="anchor" aria-hidden="true" href="#github-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">repo-secret</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">stringData</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">git</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#ae81ff">https://github.com/organization/repo</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">password</span>: <span style="color:#ae81ff">github-token</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">username</span>: <span style="color:#ae81ff">git</span>
</span></span></code></pre></div><h3 id="gitlab-integration">GitLab Integration<a hidden class="anchor" aria-hidden="true" href="#gitlab-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">gitlab-secret</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">stringData</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">git</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#ae81ff">https://gitlab.com/organization/repo</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">password</span>: <span style="color:#ae81ff">gitlab-token</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">username</span>: <span style="color:#ae81ff">git</span>
</span></span></code></pre></div><h2 id="custom-tool-integration">Custom Tool Integration<a hidden class="anchor" aria-hidden="true" href="#custom-tool-integration">#</a></h2>
<h3 id="webhook-configuration">Webhook Configuration<a hidden class="anchor" aria-hidden="true" href="#webhook-configuration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">webhooks</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - type: GitHub
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      endpoint: /api/webhook
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      url: https://github.com/your-org/repo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      secret: $webhook-secret</span>
</span></span></code></pre></div><h3 id="custom-health-checks">Custom Health Checks<a hidden class="anchor" aria-hidden="true" href="#custom-health-checks">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">resource.customizations</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    custom.group/Kind:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      health.lua: |
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        hs = {}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        if obj.status.health == &#34;healthy&#34; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          hs.status = &#34;Healthy&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          hs.status = &#34;Progressing&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        end
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        return hs</span>
</span></span></code></pre></div><h2 id="monitoring-solutions">Monitoring Solutions<a hidden class="anchor" aria-hidden="true" href="#monitoring-solutions">#</a></h2>
<h3 id="datadog-integration">Datadog Integration<a hidden class="anchor" aria-hidden="true" href="#datadog-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">datadog-secret</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">stringData</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">api-key</span>: <span style="color:#ae81ff">your-datadog-api-key</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">datadog.enabled</span>: <span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">datadog.address</span>: <span style="color:#e6db74">&#34;https://api.datadoghq.com&#34;</span>
</span></span></code></pre></div><h3 id="new-relic-integration">New Relic Integration<a hidden class="anchor" aria-hidden="true" href="#new-relic-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">monitoring.newrelic.com/v1alpha1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">NRQLAlert</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-sync-alert</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">query</span>: <span style="color:#e6db74">&#34;SELECT count(*) FROM ArgoCD WHERE status = &#39;Failed&#39;&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h2 id="security-integration">Security Integration<a hidden class="anchor" aria-hidden="true" href="#security-integration">#</a></h2>
<h3 id="vault-integration">Vault Integration<a hidden class="anchor" aria-hidden="true" href="#vault-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">vault.enabled</span>: <span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">vault.addr</span>: <span style="color:#e6db74">&#34;https://vault.example.com&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">vault.role</span>: <span style="color:#e6db74">&#34;argocd&#34;</span>
</span></span></code></pre></div><h3 id="certificate-management">Certificate Management<a hidden class="anchor" aria-hidden="true" href="#certificate-management">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">cert-manager.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Certificate</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cert</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">secretName</span>: <span style="color:#ae81ff">argocd-secret</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">issuerRef</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">letsencrypt-prod</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterIssuer</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dnsNames</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">argocd.example.com</span>
</span></span></code></pre></div><h2 id="troubleshooting-integrations">Troubleshooting Integrations<a hidden class="anchor" aria-hidden="true" href="#troubleshooting-integrations">#</a></h2>
<h3 id="common-integration-issues">Common Integration Issues<a hidden class="anchor" aria-hidden="true" href="#common-integration-issues">#</a></h3>
<ol>
<li>Authentication failures</li>
<li>Webhook misconfiguration</li>
<li>Permission problems</li>
<li>Network connectivity</li>
</ol>
<h3 id="debug-procedures">Debug Procedures<a hidden class="anchor" aria-hidden="true" href="#debug-procedures">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Check integration status</span>
</span></span><span style="display:flex;"><span>argocd admin settings validate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Test webhook</span>
</span></span><span style="display:flex;"><span>curl -X POST https://argocd/api/webhook -d @webhook-payload.json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Verify connections</span>
</span></span><span style="display:flex;"><span>argocd admin app validate
</span></span></code></pre></div><h2 id="best-practices">Best Practices<a hidden class="anchor" aria-hidden="true" href="#best-practices">#</a></h2>
<h3 id="security-considerations">Security Considerations<a hidden class="anchor" aria-hidden="true" href="#security-considerations">#</a></h3>
<ul>
<li>Use service accounts</li>
<li>Implement least privilege</li>
<li>Regular secret rotation</li>
<li>Audit logging</li>
</ul>
<h3 id="performance-optimization">Performance Optimization<a hidden class="anchor" aria-hidden="true" href="#performance-optimization">#</a></h3>
<ul>
<li>Rate limiting</li>
<li>Cache configuration</li>
<li>Connection pooling</li>
<li>Resource allocation</li>
</ul>
<h2 id="homelab-integration-examples">Homelab Integration Examples<a hidden class="anchor" aria-hidden="true" href="#homelab-integration-examples">#</a></h2>
<h3 id="local-git-server-integration-gitea">Local Git Server Integration (Gitea)<a hidden class="anchor" aria-hidden="true" href="#local-git-server-integration-gitea">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">gitea-repo-secret</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">stringData</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">type</span>: <span style="color:#ae81ff">git</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#ae81ff">http://gitea.local/your-org/repo</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">username</span>: <span style="color:#ae81ff">git</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">password</span>: <span style="color:#ae81ff">your-token</span>
</span></span></code></pre></div><h3 id="local-registry-integration">Local Registry Integration<a hidden class="anchor" aria-hidden="true" href="#local-registry-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">local-registry-secret</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">type</span>: <span style="color:#ae81ff">kubernetes.io/dockerconfigjson</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">stringData</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">.dockerconfigjson</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      &#34;auths&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;registry.local:5000&#34;: {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;auth&#34;: &#34;base64-encoded-auth&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }</span>
</span></span></code></pre></div><h3 id="tailscale-vpn-integration">Tailscale VPN Integration<a hidden class="anchor" aria-hidden="true" href="#tailscale-vpn-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">timeout.reconciliation</span>: <span style="color:#ae81ff">180s</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">kustomize.buildOptions</span>: --<span style="color:#ae81ff">network</span>
</span></span></code></pre></div><h2 id="homelab-monitoring-integration">HomeLab Monitoring Integration<a hidden class="anchor" aria-hidden="true" href="#homelab-monitoring-integration">#</a></h2>
<h3 id="prometheus-stack">Prometheus Stack<a hidden class="anchor" aria-hidden="true" href="#prometheus-stack">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">argoproj.io/v1alpha1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Application</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">prometheus-stack</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">project</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">source</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">repoURL</span>: <span style="color:#ae81ff">https://github.com/prometheus-community/helm-charts.git</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">targetRevision</span>: <span style="color:#ae81ff">HEAD</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">charts/kube-prometheus-stack</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">helm</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">values</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        grafana:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          adminPassword: your-admin-password
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        prometheus:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          prometheusSpec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            retention: 15d
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            storageSpec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              volumeClaimTemplate:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  storageClassName: local-path
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                  resources:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                    requests:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">                      storage: 50Gi</span>
</span></span></code></pre></div><h3 id="grafana-dashboard-configuration">Grafana Dashboard Configuration<a hidden class="anchor" aria-hidden="true" href="#grafana-dashboard-configuration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-grafana-dashboard</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">monitoring</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">grafana_dashboard</span>: <span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">argocd-dashboard.json</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      &#34;title&#34;: &#34;ArgoCD Overview&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      &#34;panels&#34;: [
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;title&#34;: &#34;Sync Status&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;type&#34;: &#34;gauge&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          &#34;datasource&#34;: &#34;Prometheus&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    }</span>
</span></span></code></pre></div><h2 id="local-authentication-integration">Local Authentication Integration<a hidden class="anchor" aria-hidden="true" href="#local-authentication-integration">#</a></h2>
<h3 id="ldap-with-freeipa">LDAP with FreeIPA<a hidden class="anchor" aria-hidden="true" href="#ldap-with-freeipa">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">url</span>: <span style="color:#ae81ff">https://argocd.local</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dex.config</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    connectors:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - type: ldap
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        name: FreeIPA
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        id: freeipa
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        config:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          host: freeipa.local:389
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          insecureNoSSL: false
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          bindDN: uid=service-account,cn=users,cn=accounts,dc=local
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          bindPW: $LDAP_PASSWORD
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          userSearch:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            baseDN: cn=users,cn=accounts,dc=local
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            filter: (objectClass=person)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            username: uid
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            idAttr: uid
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            emailAttr: mail
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            nameAttr: displayName
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          groupSearch:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            baseDN: cn=groups,cn=accounts,dc=local
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            filter: (objectClass=groupOfNames)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            userAttr: DN
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            groupAttr: member
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            nameAttr: cn</span>
</span></span></code></pre></div><h2 id="advanced-integration-examples">Advanced Integration Examples<a hidden class="anchor" aria-hidden="true" href="#advanced-integration-examples">#</a></h2>
<h3 id="hashicorp-vault-integration">HashiCorp Vault Integration<a hidden class="anchor" aria-hidden="true" href="#hashicorp-vault-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-vault-plugin-credentials</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">stringData</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VAULT_ADDR</span>: <span style="color:#e6db74">&#34;http://vault.local:8200&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">VAULT_TOKEN</span>: <span style="color:#e6db74">&#34;your-vault-token&#34;</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ConfigMap</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-cm</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">configManagementPlugins</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - name: argocd-vault-plugin
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      generate:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        command: [&#34;argocd-vault-plugin&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        args: [&#34;generate&#34;, &#34;./&#34;]</span>
</span></span></code></pre></div><h3 id="custom-metrics-integration">Custom Metrics Integration<a hidden class="anchor" aria-hidden="true" href="#custom-metrics-integration">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">monitoring.coreos.com/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ServiceMonitor</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-metrics</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">monitoring</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app.kubernetes.io/name</span>: <span style="color:#ae81ff">argocd-metrics</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">endpoints</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">port</span>: <span style="color:#ae81ff">metrics</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">interval</span>: <span style="color:#ae81ff">30s</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/metrics</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">metricRelabelings</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">sourceLabels</span>: [<span style="color:#ae81ff">__name__]</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">regex</span>: <span style="color:#e6db74">&#39;argocd_.*&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">action</span>: <span style="color:#ae81ff">keep</span>
</span></span></code></pre></div><h3 id="backup-integration-with-minio">Backup Integration with Minio<a hidden class="anchor" aria-hidden="true" href="#backup-integration-with-minio">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Secret</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">minio-backup-credentials</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">stringData</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">AWS_ACCESS_KEY_ID</span>: <span style="color:#ae81ff">your-access-key</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">AWS_SECRET_ACCESS_KEY</span>: <span style="color:#ae81ff">your-secret-key</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">batch/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">CronJob</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">argocd-backup</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">argocd</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">schedule</span>: <span style="color:#e6db74">&#34;0 1 * * *&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">jobTemplate</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">backup</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">image</span>: <span style="color:#ae81ff">bitnami/kubectl</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">command</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">/bin/sh</span>
</span></span><span style="display:flex;"><span>            - -<span style="color:#ae81ff">c</span>
</span></span><span style="display:flex;"><span>            - |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              argocd admin export &gt; /backup/argocd-$(date +%Y%m%d).yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              mc cp /backup/* minio/argocd-backup/</span>
</span></span></code></pre></div><h2 id="next-steps">Next Steps<a hidden class="anchor" aria-hidden="true" href="#next-steps">#</a></h2>
<p>Return to the <a href="http://localhost:1313/posts/argocd-guide/">main guide</a> or review <a href="http://localhost:1313/posts/argocd-guide/argocd-real-world-scenarios/">Real-World Scenarios</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/kubernetes/">Kubernetes</a></li>
      <li><a href="http://localhost:1313/tags/argocd/">Argocd</a></li>
      <li><a href="http://localhost:1313/tags/gitops/">Gitops</a></li>
      <li><a href="http://localhost:1313/tags/devops/">Devops</a></li>
      <li><a href="http://localhost:1313/tags/integration/">Integration</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/argocd-guide/argocd-real-world-scenarios/">
    <span class="title">« Prev</span>
    <br>
    <span>ArgoCD Real-World Implementation Scenarios</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/argocd-guide/argocd-quick-reference/">
    <span class="title">Next »</span>
    <br>
    <span>ArgoCD Quick Reference Guide</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ArgoCD Integration Patterns on x"
            href="https://x.com/intent/tweet/?text=ArgoCD%20Integration%20Patterns&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fargocd-guide%2fargocd-integration-patterns%2f&amp;hashtags=kubernetes%2cargocd%2cgitops%2cdevops%2cintegration">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ArgoCD Integration Patterns on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fargocd-guide%2fargocd-integration-patterns%2f&amp;title=ArgoCD%20Integration%20Patterns&amp;summary=ArgoCD%20Integration%20Patterns&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fargocd-guide%2fargocd-integration-patterns%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ArgoCD Integration Patterns on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fargocd-guide%2fargocd-integration-patterns%2f&title=ArgoCD%20Integration%20Patterns">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ArgoCD Integration Patterns on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fargocd-guide%2fargocd-integration-patterns%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ArgoCD Integration Patterns on whatsapp"
            href="https://api.whatsapp.com/send?text=ArgoCD%20Integration%20Patterns%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fargocd-guide%2fargocd-integration-patterns%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ArgoCD Integration Patterns on telegram"
            href="https://telegram.me/share/url?text=ArgoCD%20Integration%20Patterns&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fargocd-guide%2fargocd-integration-patterns%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ArgoCD Integration Patterns on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=ArgoCD%20Integration%20Patterns&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fargocd-guide%2fargocd-integration-patterns%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer><div class="comments">
    
    <script src="https://utteranc.es/client.js"
            repo="guyfromtheke/guyfromtheke"
            issue-term="pathname"
            label="comment"
            theme="preferred-color-scheme"
            crossorigin="anonymous"
            async>
    </script>
</div>



</article>
    </main>
    
<footer class="footer">
        <span>© <a href="https://github.com/adityatelange/hugo-PaperMod/graphs/contributors">PaperMod Contributors</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
